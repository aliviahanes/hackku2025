<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meal Planning</title>
    <link rel="stylesheet" href="{{url_for('static', filename='plannercss2.css')}}" />
    <link
    href="https://fonts.googleapis.com/css2?family=Readex+Pro&family=Press+Start+2P&display=swap"
    rel="stylesheet"
  />
    <script>
    document.addEventListener("DOMContentLoaded", () => {
      const mealSections = ["breakfast", "lunch", "dinner"];

      mealSections.forEach((meal) => {
        const input = document.getElementById(`${meal}-input`);
        const saveButton = document.getElementById(`save-${meal}`);
        const clearButton = document.getElementById(`clear-${meal}`);
        const listContainer = document.createElement("ul");
        listContainer.classList.add(`${meal}-list`);
        input.parentElement.appendChild(listContainer);

        const updateList = () => {
          const storedItems = JSON.parse(localStorage.getItem(`${meal}-items`)) || [];
          listContainer.innerHTML = "";
          storedItems.forEach((item, index) => {
            const listItem = document.createElement("li");
            listItem.textContent = item;
            listItem.classList.add("list-item");
            listItem.addEventListener("click", () => {
              storedItems.splice(index, 1);
              localStorage.setItem(`${meal}-items`, JSON.stringify(storedItems));
              updateList();
            });
            listContainer.appendChild(listItem);
          });
        };

        saveButton.addEventListener("click", () => {
          const value = input.value.trim();
          if (value) {
            const storedItems = JSON.parse(localStorage.getItem(`${meal}-items`)) || [];
            storedItems.push(value);
            localStorage.setItem(`${meal}-items`, JSON.stringify(storedItems));
            input.value = "";
            updateList();
          }
        });

        clearButton.addEventListener("click", () => {
          localStorage.removeItem(`${meal}-items`);
          updateList();
        });

        input.addEventListener("keydown", (event) => {
          if (event.key === "Enter") {
            saveButton.click();
          }
        });

        updateList();
      });
    });
      
    </script>
  </head>
  <body>
    <div class="app-container">
      <header class="main-header">
        <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/0dbc75aed921b8495801dfb8007da8ed02c2515f" alt="Home" class="home-icon" />
        <nav class="main-nav">
          <!-- HEADER! Section -->
            <a href="{{ url_for('home') }}" class="nav-link nav-link-active">Home</a>
            <a href="{{ url_for('home') }}" class="nav-link nav-link-active">Recipes</a> <!-- they all redirect to home rn-->
            <a href="{{ url_for('home') }}" class="nav-link nav-link-active">Meal plans</a>
            <a href="{{ url_for('home') }}" class="nav-link nav-link-active">Grocery List</a>
        </nav>
        <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/269bf4782d87c310f2e9e26d3b06a4cb27c1f8f7" alt="Search" class="search-icon" />
      </header>

      <main class="main-content">
        <section class="hero-section">
          <div class="hero-content">
            <h1 class="hero-title">Choose Your Weekly Recipes</h1>
            <p class="hero-description">
              Select recipes for Breakfast, Lunch, and Dinner
            </p>
            <button class="create-meal-button">CREATE YOUR MEAL</button>
          </div>
        </section>

        <!-- Breakfast Section -->
        <section class="meal-section breakfast-section">
          <div class="meal-content">
            <h2 class="meal-title">Breakfast Recipe</h2>
            <div class="meal-selection">
              <div class="recipe-input-area">
                <div class="input-container">
                  <input
                    type="text"
                    id="breakfast-input"
                    placeholder="Enter Breakfast Recipe"
                    class="recipe-input"
                  />
                </div>
                <div class="button-group">
                  <button id="clear-breakfast" class="clear-button">Clear List</button>
                  <button id="save-breakfast" class="submit-button">Add</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Lunch Section -->
        <section class="meal-section lunch-section">
          <div class="meal-content">
            <h2 class="meal-title">Lunch Recipes</h2>
            <div class="meal-selection">
              <div class="recipe-input-area">
                <div class="input-container">
                  <input
                    type="text"
                    id="lunch-input"
                    placeholder="Enter Lunch Recipe"
                    class="recipe-input"
                  />
                </div>
                <div class="button-group">
                  <button id="clear-lunch" class="clear-button">Clear List</button>
                  <button id="save-lunch" class="submit-button">Add</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Dinner Section -->
        <section class="meal-section dinner-section">
          <div class="meal-content">
            <h2 class="meal-title">Dinner Recipes</h2>
            <div class="meal-selection">
              <div class="recipe-input-area">
                <div class="input-container">
                  <input
                    type="text"
                    id="dinner-input"
                    placeholder="Enter Dinner Recipe"
                    class="recipe-input"
                  />
                </div>
                <div class="button-group">
                  <button id="clear-dinner" class="clear-button">Clear List</button>
                  <button id="save-dinner" class="submit-button">Add</button>
                </div>
              </div>
            </div>
          </div>
        </section>
        <!-- CHATBOT Section (under contruction) -->
        <section class="chatbot-intro-section">
          <div class="chatbot-intro-content">
            <h2 class="chatbot-intro-title">Need Ideas?</h2>
            <p class="chatbot-intro-description">
              Type what you're in the mood for and our chatbot will help
            </p>
          </div>
        </section>

        <h2 class="chatbot-title">LETS EAT! CHAT BOT</h2>

        <div class="chatbot-container"></div>

        <div class="chatbot-input-container">
          <input type="text" placeholder="ENTER HERE" class="chatbot-input" />
        </div>
      </main>

      <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/6bdb3dd4193024b4c0a2fd5c88b4420f69de88ce" alt="Flower" class="decoration-flower" />
      <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/355a73802b6344ebe3c7aa3674358aa480179979" alt="Banana Split" class="decoration-banana" />
    </div>
  </body>
</html>
